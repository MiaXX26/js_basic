<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    #user_name.err {
        border-color: red;
    }
    </style>
</head>
<body>
    <form method="POST" action="/">
        <div class="fieldset">
            <label for="">美女名字</label>
            <input type="text" name="" id="user_name" placeholder="请输入女朋友的名字">
        </div>
        <div class="fieldset">
            <a href="javascript:;" class="button add_btn">新增</a>
            <!-- javascript:; -> javascript:void(0); 什么都不做 -->
        </div>
        <div class="fieldset">
            <div class="msg"></div>
        </div>
    </form>
    <script>
    const qdLoves = [];
    const addBtn = document.querySelector('.add_btn');
    const userInput = document.querySelector('#user_name');
    const msg = document.querySelector('.msg');

    addBtn.addEventListener('click', function() {
        let username = userInput.value;
        // console.log(username);
        if (username === '') {
            userInput.focus(); // 聚焦，提升用户体验
            // alert('请输入一位美女的名字');
            return; // 终止代码的执行
        }
        // 重复的数组项不添加
        for (let i = 0; i < qdLoves.length; i++) {
            if (qdLoves[i] === username) {
                userInput.classList.add('err');
                 // .classList -> 操纵元素的     .add -> 加一个类
                return;
            }
        }
        qdLoves.push(username);
        let loveText = `东哥交了${qdLoves.length}位女朋友，她们是${qdLoves.join(' ')}`;
        msg.innerHTML = loveText;
        userInput.value = ''; // 输入完成，输入框自动为空
    });
    userInput.addEventListener('focus', function() {
        if(this.classList.contains('err'))
            this.classList.remove('err');
    })
    </script>
</body>
</html>